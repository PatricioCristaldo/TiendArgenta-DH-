<!DOCTYPE html>
<html lang="es">
  <%- include('./partials/head',{title:'Perfil de usuario'}) %>
  <body class="usuario">
      <%- include('./partials/header') %>
    <main>
      <form action="/usuario/editarUsuario/<%= usuario.id %>?_method=PUT" method="post" enctype="multipart/form-data" id="formulario"> <!--ENCTYPE FUNDAMENTAL PARA SUBIR IMG CON MULTER-->
        
        <div class="foto">
          <img src="/images/usuario/<%= usuario.imagen %>" alt="">
          <div class="selImg mb-3">
            <label for="formFileMultiple" class="form-label">Cambiar imagen de perfil</label>
            <input class="form-control" type="file" name="imagen" id="formFileMultiple" value="<%= locals.old && old.imagen ? old.imagen: null %>" >
            <small class="red" id="imagenContainer"><%= locals.errors && errors.imagen ? errors.imagen.msg : null %> </small>
          </div>
        <h3><%= usuario.nombre %> <%= usuario.apellido %></h3>
        
        </div>
        <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              Datos personales
            </button>
          </h2>
          
          <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <ul>
                <li><span>Editar Nombres</span>
                  <input type="text" name="Nombres" class="form-control" id="Nombres" value="<%=locals.old && old.nombre ? old.Nombres: null %><%= usuario.nombre %>" placeholder="Nombres">
                  <small class="red" id="nombresContainer"><%= locals.errors && errors.Nombres ? errors.Nombres.msg : null %> </small>
                </li>
                <li><span>Editar Apellidos</span>
                  <input type="text" name="Apellidos" class="form-control" id="Apellidos" value="<%=locals.old && old.apellido ? usuario.Apellidos : null %><%= usuario.apellido %>" placeholder="Apellidos">
                  <small class="red" id="apellidosContainer"><%= locals.errors && errors.Apellidos ? errors.Apellidos.msg : null %> </small>
                </li>
                
                <li>
                  <span>DNI</span>
                  <input class="form-control" type="number" name="dni" id="dni" value="<%= locals.old && old.dni ? old.dni: null %><%= usuario.dni %>" placeholder="Ingrese su DNI" >
                  <small class="red" id="dniContainer"><%= locals.errors && errors.dni ? errors.dni.msg : null %> </small>
                </li>
                <li><span>Teléfono</span>
                  <input class="form-control" type="number" name="telefono" id="telefono" value="<%= locals.old && old.telefono ? old.telefono: null %><%= usuario.telefono %>" placeholder="Ingrese su Teléfono" >
                  <small class="red" id="telefonoContainer"><%= locals.errors && errors.telefono ? errors.telefono.msg : null %> </small>
                </li>
              </ul></div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingFour">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                Datos de envío
              </button>
            </h2>
            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <ul>
                  <li><span>Dirección</span><input class="form-control" type="text" name="direccion" id="direccion" value="<%= locals.old && old.direccion ? old.direccion: null %><%= usuario.direccion  %>" placeholder="Ingrese su dirección" >
                    <small class="red" id="direccionContainer"><%= locals.errors && errors.direccion ? errors.direccion.msg : null %> </small></li>
                  <li><span>Localidad</span> <input class="form-control" type="text" name="localidad" id="localidad" value="<%= locals.old && old.localidad ? old.localidad: null %><%= usuario.localidad %>" placeholder="Ingrese su localidad" >
                    <small class="red" id="localidadContainer"><%= locals.errors && errors.localidad ? errors.localidad.msg : null %> </small></li>
                  <li><span>Provincia</span><input class="form-control" type="text" name="provincia" id="provincia" value="<%= locals.old && old.provincia ? old.provincia: null %><%= usuario.provincia %>" placeholder="Ingrese su provincia" >
                    <small class="red" id="provinciaContainer"><%= locals.errors && errors.provincia ? errors.provincia.msg : null %> </small></li>
                  <li><span>Código postal</span> <input class="form-control" type="number" name="codPost" id="codPost" value="<%= locals.old && old.codPost ? old.codPost: null %><%= usuario.codPost %>" placeholder="Ingrese su código postal" >
                    <small class="red" id="codPostContainer"><%= locals.errors && errors.codPost ? errors.codPost.msg : null %> </small></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingFive">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                Mis compras
              </button>
            </h2>
            <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <a href="/productos/carrito"><h3>Carrito</h3></a> </div>
              </div>
            </div>
            <div class="button d-flex justify-content-center">
              <small class="error-msg" id="errorSubmit"></small>
              <button class="btn btn-success" type="submit">Aceptar cambios</button>
            </div>
          </form>

        </main>
        
        <%- include('./partials/footer') %>
        <script src="/javascript/editarUsuario.js"></script>
      </body>
      </html>
      